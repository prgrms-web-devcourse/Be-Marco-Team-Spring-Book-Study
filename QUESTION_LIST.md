# 스프링 책 스터디 질문 모음

# **1주차**
<br>

### 최영권
- @Bean과 @Component의 차이는 무엇일까요??
    - @Component는 개발자가 직접 컨트롤 할 수 있는 객체를 빈으로 등록하기 위해 사용할 수 있는 애너테이션이고 @Bean은 외부 라이브러리 같이 개발자가 직접 컨트롤할 수 없는 클래스 타입을 빈으로 등록하기 위한 애너테이션이며 각각 target이 클래스, 메서드로 사용할 수 있는 타입이 다르다.
- GoF의 싱글톤과 스프링 싱글톤의 차이는 무엇일까요??
    - 가장 큰 차이는 싱글톤의 범위인데 GoF의 싱글톤은 **클래스 로더**당 1개의 객체를 생성할 수 있도록 하고, 스프링 싱글톤은 **스프링 컨테이너** 안에서 Map과 같이 Bean Id를 Key값으로 구분하여 하나의 인스턴스만 생성하도록 한다.
- 생성자 기반, 세터 기반 의존성 주입이 있는데 생성자 기반 의존성 주입을 권장하는 이유가 무엇일까요?? 각각의 특징은??
    -  Spring 공식문서에서는 생성자 주입을 권장하는데 이유는 애플리케이션 구성 요소를 불변 객체로 구현할 수 있고 인스턴스를 생성할 때 완전히 초기화된 상태에서 클라이언트(호출) 코드로 반환할 수 있습니다.
- 스프링에서 순환참조와 해결방법
    - 순환참조는 설계의 문제일 수 있다. A가 B를 참조하는데 B도 A를 참조하는 것과 같은 경우
    - 해결 방법은 재설계, Setter, Field 주입 사용 등이 있다.
    - 이 외에 순환참조에 대한 다양한 해결 방법 [참고자료](https://www.baeldung.com/circular-dependencies-in-spring)

### 이주오
- 스프링 빈(싱글턴 scope)은 쓰레드 세이프일까요?
- 스프링의 IoC/DI의 목적과 그로인한 이점은 무엇일까요?
- 빈 팩토리와 애플리케이션 컨텍스트의 차이는 무엇일까요?

### 나상원
- p75에 (객체조립기) Assembler.java 는 특정타입의 클래스만 생성하지만, 스프링의 DI @configuration 로 만든 차이는 범용 조립기라는 의미가, @bean 으로 원하는 클래스, 객체 타입을 넣어줄 수 있어서 그런가요? 범용조립기의 의미가 잘 이해가 안됩니다.
- DI방식 중 생성자를 통한 전체와, 세터 메서드를 이용한 방식에서, 각 회원가입, 찾기, 패스워드 변경에 잘못된 내용을 전달하는 실수를 줄이려면 어떻게 해야할까요?
- 아래와 같이 메소드 안에다가 스프링컨테이너 생성을 한 이유가 궁금합니다.
```
java 
public class MainForImport{
    private static ApplicationContext ctx = null;
    public static void main(String[] args) throws IOException{
        ctx = new AnnotationConfigApplicationContext(AppConfImport.class);
    }
}
```
- Spring에서 DI란 ?

### 한맹희
- 실무에서 자바 설정 파일 말고 xml이나 groovy로 도 빈 설정을 하기도 하나요?
- setter가 없는데도 @Autowired가 동작해서 필드 주입이 가능한 원리가 궁금합니다.
- 의존 객체를 구하는 방법에는 DI와 서비스 로케이터가 있다고 책에서 언급하고 있습니다. 서비스 로케이터는 무엇이며 스프링 이전에는 의존객체를 어떻게 처리했는지 궁금합니다!

- 테스트에서는 왜 @Autowired를 사용해야 하는가?

<br>

# **2주차**

### 최영권

- 빈 스코프에서 싱글톤과 프로토타입의 차이점은 무엇인가?
    - 빈 식별자에 대해서 싱글톤은 하나의 객체만 존재하고 프로토 타입은 해당 빈 객체를 구할때마다 생성한다. 또한 프로토타입 범위를 갖는 빈은 완전한 라이프사이클을 따르지 않기 때문에 컨테이너를 종료해도 빈 객체의 소멸 메서드를 실행하지 않아서 소멸 처리를 직접 해야한다.

- Springboot에서는 따로 설정 파일로 설정하지 않아도 컴포넌트 스캔이 되는데 어떻게 읽는지?
    - @SpringBootApplication 안에 @componentscan이 존재하고 @SpringBootApplication 이 붙은 클래스를 기준으로 basePackage를 잡고 하위 클래스를 모두 컴포넌트 스캔의 대상으로 삼는다.

- 책 128~129p에서 설정 클래스에서 수동으로 의존을 주입하는 것과 @Autowired를 통해서 자동으로 주입하는 것 둘 다 설정했을 때 자동 주입된 객체가 사용하는 것을 알 수 있었는데 왜 자동주입 된 객체가 사용되는지?
    - 142p에서 보면 스프링 빈 객체의 라이프 사이클은 1. 객체 생성 -> 2. 의존 설정 -> 3. 초기화 -> 4.소멸 생성 순서로 관리된다. 그래서 먼저 객체 생성 시 수동으로 의존을 주입하는 코드가 실행되고 난 후에 자동 주입 하는 코드가 실행되기 때문에 자동 주입으로 설정한 객체가 사용된 것 같다.

### 이주오
- 스프링에서 자바 컬렉션 주입을 하는 방법은?
    - 마찬가지로 @Autowried 또는 생성자 주입을 통해 가능하다. 뿐만 아니라 빈 객체들의 컬렉션도 주입가능하고 @ Order를 이용해서 sorting 또한 가능하다.
-> 참고, 참고2

- @ Autowired vs @ Inject vs @ Resource
    - 모두 주입을 위해 사용할 수 있으나 스프링에서 지원하는 @ Autowired 외에 나머지 애너테이션들은 자바에서 지원한다.
    - 타입으로 빈을 검색하는 두 애노테이션과 달리 @ Resource 애노테이션은 이름을 통한 검색 방식이기 때문에, POJO가 여럿일 때 대상이 모호하지 않고, 명확하다.
 - [참고](https://withseungryu.tistory.com/65)

- 스프링이 지원하는 빈 scope들은??
     ![bean scoop](https://user-images.githubusercontent.com/56071126/137344165-5f977a93-9642-4dfc-87eb-daa0e7505b0d.png)
    - request, session, global session 스코프들은 웹 기반 어플리케이션을 위한 용도이다.
    - [참고](https://docs.spring.io/spring-framework/docs/3.0.0.M3/reference/html/ch04s04.html)

### 한맹희
- 스프링 빈 객체의 라이프사이클 설명!
    - 스프링 컨테이너가 관리하는 빈객체의 라이프사이클은 객체생성 -> 의존 설정 -> 초기화 -> 소멸 단계를 거친다.
초기화 단계에서는 빈 객체를 초기화하기 위해 스프링에서는 여러 방법을 지원하는데
순서로 보면 @PostConstruct 메서드-> InitializeingBean.afterProperiesSet() -> 커스텀 init 메서드 순으로 호출된다.
스프링 컨테이너를 종료하면 스프링 컨테이너는 빈 객체의 소멸을 처리하는데 이때,
@PreDestory 메서드 -> DisposableBean.destory() -> 커스텀 desotry 메서드 순으로 호출된다.`

- @qualifier에 입력하는 한정자와 빈 이름의 관계가 어떻게 되는지?
    -  @qualifier에 입력하는 한정자와 스프링 컨테이너에 등록되는 빈 이름은 같지 않다. 좀 더 엄밀히 말하면 한정자를 설정해도
해당 한정자로 빈 이름이 설정되지 않는다.
추가적으로 책에서 주입 받는곳에 @qualifier가 없으면 빈 이름으로 한정자가 설정된다고 했는데
막상 빈을 등록할때 주입 받는곳 필드 이름으로 @qualifier를 붙여도 제대로 동작하지 않는다.
다만 주입 받는 필드 이름과 빈이름을 같게 하면 제대로 주입한다.

- 싱글톤과 프로토 타입 말고 다른 빈 스코프를 사용하는 경우가 어떤 경우가 있는지


### 이하정
- 무한순환참조와 같은 이유로 @Autowired 사용을 지양해야할 때도 있다고 하는데 사용해야할 때 구별을 어떻게 해야하는가?

- main 메서드를 보면 if 분기문이 많은데 이런 경우는 어떻게 바꾸는 게 좋을까? enum으로 바꿀 수 있나?

- 직접 설정한 destroy method를 통해서 빈 객체 소멸을 거치고 난 후에는 소멸한 빈에 접근할 수 없는건가?

# **3주차**

### 한맹희
- 커넥션 풀 모듈인 톰캣 JDBC와 HikariCP의 차이점?
- JDK Dynamic Proxy와 CGLIB의 차이점?
- SQLException와 DataaccessException으로 보는 checked와 unchecked exception 차이점

### 최영권
- 167p에서 proxy 객체는 상속받은 상위객체를 보고 만들어진다고 했는데 인터페이스 상속을 여러개 받았으면? 아니면 여러번 받았으면(ex.최상위 - 상위 - 구현) 어떤것을 보고 프록시 객체가 생성될까요??
- PreparedStatement 와 Statement 의 차이점은 무엇인가?
- Filter, Interceptor, AOP 차이

### 나상원
- AOP란 무엇인가요?, 인프라 로직은 어떤걸 지칭하는 걸까요?
- 스프링의 프록시란?
- @configuration 과 @EnableAspectJAutoProxy 은 공통점